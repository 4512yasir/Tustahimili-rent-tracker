datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       String    @id @default(auto()) @map("_id") @db.ObjectId
  name     String
  email    String    @unique
  password String
  role     String
  plots    Plot[]    @relation("OwnerPlots")
  rents    Rent[]    @relation("UserRents")
  repairs  Repair[]  @relation("UserRepairs")
  expenses Expense[] @relation("UserExpenses")
}

model Plot {
  id          String    @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  location    String
  units       Int
  description String
  rentAmount  Float
  status      String
  ownerId     String
  owner       User      @relation("OwnerPlots", fields: [ownerId], references: [id])
  rents       Rent[]    @relation("PlotRents")
  repairs     Repair[]  @relation("PlotRepairs")
  expenses    Expense[] @relation("PlotExpenses")
}

model Rent {
  id      String   @id @default(auto()) @map("_id") @db.ObjectId
  amount  Float
  dueDate DateTime
  paid    Boolean  @default(false)
  plotId  String
  userId  String
  plot    Plot     @relation("PlotRents", fields: [plotId], references: [id])
  user    User     @relation("UserRents", fields: [userId], references: [id])
}

model Repair {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  description String
  cost        Float
  completed   Boolean @default(false)
  plotId      String
  userId      String
  plot        Plot    @relation("PlotRepairs", fields: [plotId], references: [id])
  user        User    @relation("UserRepairs", fields: [userId], references: [id])
}

model Expense {
  id     String   @id @default(auto()) @map("_id") @db.ObjectId
  amount Float
  date   DateTime
  plotId String
  userId String
  plot   Plot     @relation("PlotExpenses", fields: [plotId], references: [id])
  user   User     @relation("UserExpenses", fields: [userId], references: [id])
}
